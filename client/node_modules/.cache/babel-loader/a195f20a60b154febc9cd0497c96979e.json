{"ast":null,"code":"var _jsxFileName = \"/Users/akshayasreekumar/Documents/Akshaya/InterACTPayReactTs/interactPAY-TS/client/src/components/Pages/Payment.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport './Payment.css';\nimport Plaid from '../Plaid/Plaid';\nimport Stripe from '../Stripe/Stripe'; //import StripeCard from '../Stripe/StripeCard';\n//import StripeAch from '../Stripe/StripeAch'\n\nimport { numberFormat } from '../../lib/numberFormat';\nimport { ButtonGroup, ToggleButton, Form, Placeholder } from 'react-bootstrap';\nimport Spinner from '../Spinner/spinner';\nimport Alert from '../Alert/Alert';\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Payment = () => {\n  _s();\n\n  const [isLoader, setIsLoader] = React.useState(true);\n  const [showAch, setShowAch] = React.useState(false);\n  const [showCard, setShowCard] = React.useState(false);\n  const [acceptCondition, setAcceptCondition] = React.useState(false);\n  const [paymentSelected, setPaymentSelected] = React.useState(false);\n  const [showOtherAmoutTextField, setShowOtherAmoutTextField] = React.useState(false);\n  const [apicustomerId, setApicustomerId] = useState(null);\n  const [urlmail, setUrlmail] = useState(null);\n  const [urlOrderId, setUrlOrderId] = useState(null);\n  const [urlContactId, setUrlContactId] = useState(null);\n  const [todaysDate, setTodaysDate] = useState(null);\n  const [baseUrl, setBaseUrl] = useState(null);\n  const [alert, setAlert] = useState({});\n  const [validLink, setvalidLink] = React.useState(false);\n  const [expiredLink, setexpiredLink] = React.useState(false);\n  const [cardType, setCardType] = useState(null);\n  const [totalAmount, setTotalAmount] = useState(null);\n  const [patientName, setpatientName] = useState(null);\n  const [origin, setOrigin] = useState(null);\n  const [destination, setDestination] = useState(null);\n  const [travelDate, setTravelDate] = useState(null);\n  const [dueAmount, setDueAmount] = useState(null);\n  const [payableAmount, setPayableAmount] = useState(null);\n  const [orderNumber, setOrderNumber] = useState(null);\n  const [orderTotal, setOrderTotal] = useState(null);\n  const [paidAmount, setPaidAmount] = useState(null);\n  const [transactionTotal, setTransactionTotal] = useState(null);\n  const [orderOpportunity, setOrderOpportunity] = useState(null);\n  const [orderQuote, setOrderQuote] = useState(null);\n  const [billingAddress, setBillingAddress] = useState({});\n  const [paymentUrl, setPaymentUrl] = useState('');\n  const [billingCity, setBillingCity] = useState(null);\n  const [billingCountry, setBillingCountry] = useState(null);\n  const [billingState, setBillingState] = useState(null);\n  const [billingPostalcode, setBillingPostalcode] = useState(null);\n  const [billingLine1, setBillingLine1] = useState(null);\n  const [idempotencyKey, setidempotencyKey] = useState('');\n  const [billingLine2, setBillingLine2] = useState(null);\n  const [showBillingDetails, setShowBillingDetails] = React.useState(false);\n  const [chargeAmount, setChargeAmount] = useState(null);\n  const [pageURL, setPageURL] = useState(null);\n  const [redirectURL, setRedirectURL] = useState(null);\n  const [transIdUrl, settransIdUrl] = useState('');\n  const [charge, setCharge] = useState('');\n  const queryString = window.location.search;\n  const urlParams = new URLSearchParams(queryString);\n  const urlPaymentLinkId = urlParams.get('Id');\n  const achRef = /*#__PURE__*/React.createRef();\n  const [radioValue, setRadioValue] = useState('card');\n  const [gateway, setGateway] = useState(null);\n  const [achAuthenticator, setAchAuthenticator] = useState(null);\n  const [paymentMethodes, setPaymentMethodes] = useState([{\n    name: '',\n    value: ''\n  }]);\n  const [isStripe, setIsStripe] = React.useState(false);\n  const [isPlaid, setIsPlaid] = React.useState(false);\n  const [isVeem, setIsVeem] = React.useState(false);\n  const radios = [{\n    name: 'Card',\n    value: 'card'\n  }, {\n    name: 'ACH',\n    value: 'ach'\n  }];\n  const [selectedPaymentOption, setSelectedPaymentOption] = useState('default');\n  useEffect(() => {\n    // getPaymentMethods()\n    if (!gateway) {\n      if (gateway) {\n        if (gateway === 'Stripe') {\n          setIsStripe(true);\n        }\n\n        if (gateway === 'Veem') {\n          setIsVeem(true);\n        }\n      }\n\n      if (achAuthenticator) {\n        if (achAuthenticator === 'Plaid') {\n          setIsPlaid(true);\n        }\n      }\n    } // getRedirections();\n\n\n    if (!idempotencyKey) {\n      createRandomKey();\n    }\n\n    getPaymentLinkDetails();\n\n    if (apicustomerId && dueAmount && orderTotal) {\n      setIsLoader(false);\n    }\n\n    if (selectedPaymentOption) {\n      console.log(\"selectedPaymentOption\" + selectedPaymentOption);\n\n      if (selectedPaymentOption === 'default') {\n        if (dueAmount) {\n          setShowOtherAmoutTextField(false);\n          setPayableAmount(JSON.stringify(dueAmount));\n        }\n      } else {\n        setShowOtherAmoutTextField(true);\n      }\n    }\n\n    setChargeAmount(null);\n    setTotalAmount(null);\n\n    if (cardType && payableAmount && charge) {\n      let chargeAmd = parseFloat(charge) / 100 * parseFloat(payableAmount);\n      setChargeAmount(JSON.stringify(chargeAmd));\n      setTotalAmount(JSON.stringify(parseFloat(payableAmount) + chargeAmd));\n    }\n\n    if (radioValue === 'card' && apicustomerId) {\n      setShowCard(true);\n    }\n\n    if (!apicustomerId) {\n      console.log(\"No Id\");\n\n      if (urlContactId && baseUrl) {\n        getContactDetails(urlContactId, baseUrl);\n      }\n    }\n\n    if (transIdUrl) {\n      console.log(\"hi\"); // updatePaymentLinkRecord();\n    }\n  }, [apicustomerId, dueAmount, orderTotal, selectedPaymentOption, payableAmount, cardType, radioValue, urlContactId, baseUrl, idempotencyKey, transIdUrl]);\n\n  function axiosTest() {\n    // create a promise for the axios request\n    const promise = axios.get(\"https://crma-pay-developer-edition.na163.force.com/InteractPay/services/apexrest/crma_pay/InteractPayAuthorization/?methodType=GET&inputParams={}\"); // using .then, create a new promise which extracts the data\n\n    const dataPromise = promise.then(response => response.data); // return it\n\n    return dataPromise;\n  }\n\n  function setChargeAmd(charge, payableAmount) {\n    let chargeAmd = parseFloat(charge) / 100 * parseFloat(payableAmount);\n    setChargeAmount(JSON.stringify(chargeAmd));\n    setTotalAmount(JSON.stringify(parseFloat(payableAmount) + chargeAmd));\n  }\n\n  async function getPaymentMethods() {\n    const response = await axios.get(\"/api/get_paymentMethods\");\n    console.log(JSON.stringify(response.data));\n    setGateway(response.data.gateway);\n    setAchAuthenticator(response.data.authenticator);\n    let array = [{\n      name: 'Card',\n      value: response.data.Card\n    }, {\n      name: 'ACH',\n      value: response.data.ACH\n    }, {\n      name: 'WireTransfer',\n      value: response.data.WireTransfer\n    }];\n    let newArray = array.filter(function (el) {\n      return el.value === true;\n    });\n    let updatedOSArray = newArray.map(p => p.value === true ? { ...p,\n      value: p.name\n    } : p);\n    console.log(\"NewArrayyy\" + JSON.stringify(updatedOSArray));\n    setPaymentMethodes(newArray);\n  }\n\n  async function getRedirections() {\n    const response = await axios.get(\"/api/get_redirectUrls\");\n    console.log(JSON.stringify(response.data));\n    setRedirectURL(response.data.page_url);\n    setPageURL(response.data.redirect_url);\n  }\n\n  const createRandomKey = () => {\n    var key = \"\";\n    var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\n    for (var i = 0; i < 10; i++) {\n      key += possible.charAt(Math.floor(Math.random() * possible.length));\n    }\n\n    setidempotencyKey(key); //this.idempotencyKey = key;\n\n    console.log(\"text--idempotencyKey->\" + idempotencyKey); //localStorage.setItem('RandomKey', this.idempotencyKey);\n  };\n\n  const getPaymentLinkDetails = () => {\n    let baseUrl = \"https://crma-pay-developer-edition.na163.force.com/\";\n    setBaseUrl(baseUrl);\n    var payLinkParams = {\n      paymentLinkId: urlPaymentLinkId\n    };\n    var url = baseUrl + \"InteractPay/services/apexrest/crma_pay/InterACTPayAuthorizationUpdated/?methodType=GET&inputParams=\" + JSON.stringify(payLinkParams);\n    fetch(url, {\n      method: \"GET\",\n      headers: {\n        mode: \"cors\",\n        \"Access-Control-Allow-Origin\": \"*\"\n      }\n    }).then(response => response.text()).then(response => {\n      response = response.slice(1, response.length - 1);\n      var apiResponse = [];\n      apiResponse = JSON.parse(response);\n      console.log(\"----------------------->\" + JSON.stringify(apiResponse));\n      var amountDue = apiResponse.crma_pay__AmountDue__c;\n      var linkActive = apiResponse.crma_pay__Active__c;\n      var apiUrl = apiResponse.crma_pay__PaymentURL__c;\n      let url = new URL(apiUrl);\n      setUrlOrderId(url.searchParams.get(\"orderId\"));\n      setUrlContactId(url.searchParams.get(\"contactId\"));\n      var urlCustomerId = url.searchParams.get(\"customerId\"); // var urlCustomerId = '';\n\n      setApicustomerId(urlCustomerId);\n      let urlAmount = url.searchParams.get(\"amount\");\n      setUrlmail(url.searchParams.get(\"mail\"));\n      let createdDate = apiResponse.CreatedDate;\n      let date = new Date(Date.parse(createdDate));\n      var addedDate = date.setHours(date.getHours() + 8);\n      const current = new Date();\n      setTodaysDate(`${current.getFullYear()}-${current.getMonth() + 1}-${current.getDate()}`);\n      var d1 = new Date(addedDate);\n      var d2 = new Date(current);\n      var timeleft = d1.getTime() - d2.getTime();\n      var days = Math.floor(timeleft / (1000 * 60 * 60 * 24));\n      var hours = Math.floor(timeleft % (1000 * 60 * 60 * 24) / (1000 * 60 * 60));\n      var minutes = Math.floor(timeleft % (1000 * 60 * 60) / (1000 * 60));\n      var seconds = Math.floor(timeleft % (1000 * 60) / 1000);\n      console.log(days + ' Day' + hours + ' Hr' + minutes + ' Min' + seconds + ' Sec');\n      let valid = false;\n\n      if (days >= 0) {\n        if (hours > 0) {\n          setvalidLink(true);\n        }\n      } // else {\n      //     setexpiredLink(true);\n      //     updatePaymentLinkRecord();\n      // }\n\n\n      var inputJson = apiResponse.crma_pay__JSON_Input__c;\n      var x = JSON.stringify(inputJson);\n      var xy = x.slice(1, x.length - 1);\n      var new1 = xy.replace(/!/g, '\"');\n      var y = JSON.parse(new1);\n\n      if (y[0].PatientName__c) {\n        setpatientName(y[0].PatientName__c);\n      }\n\n      if (y[0].OriginDesired__c) {\n        setOrigin(y[0].OriginDesired__c);\n      }\n\n      if (y[0].DestinationDesired__c) {\n        setDestination(y[0].DestinationDesired__c);\n      }\n\n      if (y[0].TravelDate__c) {\n        var dateValue = y[0].TravelDate__c;\n        setTravelDate(dateValue.substring(0, 10));\n      }\n\n      if (y[0].AmountDue__c) {\n        setDueAmount(y[0].AmountDue__c);\n      }\n\n      getOrderDetails(urlOrderId, baseUrl); //getStripeKey();\n    }).catch(err => {\n      console.log(\"err\" + err);\n    });\n  };\n\n  const getContactDetails = (contactId, baseUrl) => {\n    var contactParams = {\n      contactId: contactId\n    };\n    var url = baseUrl + \"InteractPay/services/apexrest/crma_pay/InterACTPayAuthorizationUpdated/?methodType=GET&inputParams=\" + JSON.stringify(contactParams);\n    console.log(\"this.contact url ---->\" + url);\n    fetch(url, {\n      method: \"GET\",\n      headers: {\n        mode: \"cors\",\n        \"Access-Control-Allow-Origin\": \"*\"\n      }\n    }).then(response => response.text()).then(response => {\n      response = response.slice(1, response.length - 1);\n      var contactReponse = JSON.parse(response);\n      var name = contactReponse.Name;\n      var email = contactReponse.Email;\n      createCustomer(name, email, contactId);\n    }).catch(err => {\n      console.log(\"err\" + err);\n    });\n  };\n\n  const createCustomer = (name, email, contactId) => {\n    fetch(\"https://api.stripe.com/v1/customers?name=\" + name + \"&email=\" + email, {\n      method: \"POST\",\n      headers: {\n        \"x-rapidapi-host\": \"https://api.stripe.com\",\n        Authorization: \" Bearer sk_test_51K9PF1JZdmpiz6ZwomLVnx7eXnu0Buv19EwOe262mK5uj5E4bTpWO1trTF5S1OvVmdnpWtd2fm8s0HHbMlrqY2uZ00lWc3uV7c\"\n      }\n    }).then(response => response.json()).then(response => {\n      var newcustomerId = response.id;\n      console.log(\"customer create -->\" + response.id);\n\n      if (newcustomerId) {\n        let updateContParams = {\n          contactId: contactId,\n          customerId: response.id\n        };\n        var url = baseUrl + \"InteractPay/services/apexrest/crma_pay/InterACTPayAuthorizationUpdated/?methodType=POST&inputParams=\" + JSON.stringify(updateContParams);\n        console.log(\"this.final url --->\" + url);\n        fetch(url, {\n          method: \"GET\",\n          headers: {\n            mode: \"cors\",\n            \"Access-Control-Allow-Origin\": \"*\"\n          }\n        }).then(response => response.json()).then(response => {\n          console.log(\" update  contact-->\" + JSON.stringify(response));\n          setApicustomerId(newcustomerId);\n        }).catch(err => {\n          console.log(\"err\" + err);\n        });\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const getOrderDetails = (orderId, baseUrl) => {\n    var orderParams = {\n      orderId: orderId\n    };\n    console.log(\"baseUrls--->\" + baseUrl);\n    var url = baseUrl + \"InteractPay/services/apexrest/crma_pay/InterACTPayAuthorizationUpdated/?methodType=GET&inputParams=\" + JSON.stringify(orderParams);\n    console.log(\"this.order url ---->\" + url);\n    fetch(url, {\n      method: \"GET\",\n      headers: {\n        mode: \"cors\",\n        \"Access-Control-Allow-Origin\": \"*\"\n      }\n    }).then(response => response.text()).then(response => {\n      response = response.slice(1, response.length - 1);\n      var contactReponse = JSON.parse(response);\n      var orderReponse = JSON.stringify(JSON.parse(response));\n      var orderNum = contactReponse.orderdetails[0].OrderNumber;\n      var total = contactReponse.orderdetails[0].TotalAmount;\n      setOrderNumber(orderNum);\n      setOrderTotal(total);\n      let initialOrderAmount = '' + total + '';\n      setTransactionTotal(initialOrderAmount);\n\n      if (contactReponse.orderdetails[0].OpportunityId) {\n        setOrderOpportunity(contactReponse.orderdetails[0].OpportunityId);\n        setOrderQuote(contactReponse.orderdetails[0].QuoteId);\n      }\n\n      if (orderTotal && dueAmount) {\n        setPaidAmount(JSON.stringify(parseInt(orderTotal) - parseInt(dueAmount)));\n      }\n    }).catch(err => {\n      console.log(\"err\" + err);\n    });\n  };\n\n  const selectedCardPayment = (id, billing_details, card, charge) => {\n    console.log(\"id\" + id);\n    console.log(\"brand\" + card.brand);\n    console.log(\"charge\" + charge);\n\n    if (id) {\n      setPaymentSelected(true);\n    }\n\n    if (charge) {\n      if (payableAmount) {\n        setChargeAmd(charge, payableAmount);\n      }\n\n      setCharge(charge);\n    }\n\n    if (card) {\n      setCardType(card.brand);\n    }\n\n    let payementUrl = \"https://api.stripe.com/v1/payment_intents?currency=usd&confirm=true&customer=\" + apicustomerId + \"&payment_method=\" + id;\n    setPaymentUrl(payementUrl);\n    const billingDetails = billing_details;\n    const billingInfo = billingDetails;\n    setBillingAddress({\n      city: billingInfo.address.city,\n      country: billingInfo.address.country,\n      line1: billingInfo.address.line1,\n      line2: billingInfo.address.line2,\n      postal_code: billingInfo.address.postal_code,\n      state: billingInfo.address.state\n    });\n    setBillingCity(billingInfo.address.city);\n    setBillingCountry(billingInfo.address.country);\n    setBillingLine1(billingInfo.address.line1);\n    setBillingLine2(billingInfo.address.line2);\n    setBillingPostalcode(billingInfo.address.postal_code);\n    setBillingState(billingInfo.address.state);\n\n    if (billingInfo.address.city || billingInfo.address.country || billingInfo.address.line1 || billingInfo.address.line2 || billingInfo.address.postal_code || billingInfo.address.state) {\n      setShowBillingDetails(true);\n    }\n\n    console.log(payementUrl);\n  };\n\n  const selectedBankPayment = (id, charge) => {\n    if (id) {\n      console.log(\"Bank-Id\" + id + \"------Charge\" + charge);\n      setPaymentSelected(true);\n      let payementUrl = \"https://api.stripe.com/v1/charges?currency=usd&customer=\" + apicustomerId + \"&source=\" + id;\n      setPaymentUrl(payementUrl);\n      console.log(payementUrl);\n    }\n\n    if (charge) {\n      if (payableAmount) {\n        setChargeAmd(charge, payableAmount);\n      }\n\n      setCharge(charge);\n    }\n  };\n\n  async function makepayment() {\n    setIsLoader(true);\n    fetch(paymentUrl + '&amount=' + totalAmount, {\n      method: \"POST\",\n      headers: {\n        \"x-rapidapi-host\": \"https://api.stripe.com\",\n        \"content-type\": \"application/json\",\n        accept: \"application/json\",\n        Authorization: \" Bearer sk_test_51K9PF1JZdmpiz6ZwomLVnx7eXnu0Buv19EwOe262mK5uj5E4bTpWO1trTF5S1OvVmdnpWtd2fm8s0HHbMlrqY2uZ00lWc3uV7c\",\n        \"Idempotency-Key\": idempotencyKey\n      }\n    }).then(response => response.json()).then(response => {\n      console.log('Key----->' + idempotencyKey);\n      console.log('transactionId----->' + response.id);\n      console.log(JSON.stringify('PaymentReaponse' + response));\n      let transactionId = response.id;\n\n      if (transactionId) {\n        getPaymentLinkDetails();\n      }\n\n      let transactionstatus = response.status;\n      let gatewayMessage = JSON.parse(JSON.stringify(response.charges.data[0].outcome.seller_message));\n      let gatewayStatus = JSON.parse(JSON.stringify(response.charges.data[0].outcome.network_status));\n      let currencyCode = response.currency;\n      var localKey = localStorage.getItem('RandomKey');\n      setIsLoader(false);\n\n      if (localKey !== idempotencyKey) {\n        createTransactionRecord(transactionId, transactionstatus, gatewayMessage, gatewayStatus, currencyCode);\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  function createTransactionRecord(transactionId, transactionstatus, gatewayMessage, gatewayStatus, currencyCode) {\n    setIsLoader(true); // if (this.urlContactId) {\n    //   this.contactId = this.urlContactId;\n    // } else {\n    //   this.contactId = this.newContactId;\n    // }\n    // if (this.urlmail) {\n    //   this.mail = this.urlmail;\n    // } else {\n    //   this.mail = this.email;\n    // }\n    //var amount = '\"'+ this.payingAmount+  '\"';\n    //console.log(\"New amount------>\"+amount);\n    //const amount = this.payingAmount;\n\n    var transactionParams = {\n      paymentGatewayIdentifier: transactionId,\n      Amount: payableAmount,\n      transactionEmail: urlmail,\n      transactionCurrencyCode: currencyCode,\n      transactionOrder: urlOrderId,\n      transactionContact: urlContactId,\n      processedDateTime: todaysDate,\n      transactionStatus: transactionstatus,\n      gatewayMessage: gatewayMessage,\n      gatewayNetworkStatus: gatewayStatus,\n      transactionQuote: orderQuote,\n      transctionOpportunity: orderOpportunity,\n      billingStreet: billingLine1,\n      billingCity: billingCity,\n      billingCountry: billingCountry,\n      billingState: billingState,\n      billingZip: billingPostalcode\n    };\n    var url = baseUrl + \"InteractPay/services/apexrest/crma_pay/InterACTPayAuthorizationUpdated/?methodType=POST&inputParams=\" + JSON.stringify(transactionParams);\n    console.log(\"this.final transaction url --->\" + url);\n    fetch(url, {\n      method: \"GET\",\n      headers: {\n        mode: \"cors\",\n        \"Access-Control-Allow-Origin\": \"*\"\n      }\n    }).then(response => response.json()).then(response => {\n      if (response) {\n        console.log('LstResponse------------------------->' + response);\n        settransIdUrl(response);\n        console.log('transid------------------------->' + transIdUrl);\n        localStorage.setItem('RandomKey', idempotencyKey);\n        setIsLoader(false); //setAlert({ status: 'success', message: 'Payment completed successfully' });\n\n        if (redirectURL) {\n          window.location.href = redirectURL;\n        }\n\n        getPaymentLinkDetails(); //this.transIdUrl = response;\n        //var redirectUrl = 'https://medviation-developer-edition.na213.force.com/s/invoice-page' + '?transId=' + this.transIdUrl;\n        //console.log(\"invoked redirecturl\" + redirectUrl);\n        // if(transIdUrl){\n        // console.log('transid------------------------->' + transIdUrl);\n        //updatePaymentLinkRecord();\n        // }\n      }\n\n      console.log(\" create  transaction-->\" + JSON.stringify(response)); //this.navigateTo(redirectUrl);\n    }).catch(err => {\n      setIsLoader(false);\n      setAlert({\n        status: 'fail',\n        message: 'Something went wrong'\n      });\n      console.log(\"err\" + err);\n    });\n  }\n\n  const updatePaymentLinkRecord = () => {\n    console.log(\"Invoked Update PayLink\"); //var transId = settransIdUrl;\n\n    if (transIdUrl) {\n      var payLinkRcdParamsWithId = {\n        paymentLinkId: urlPaymentLinkId,\n        PaymentTransaction: transIdUrl,\n        Active: false\n      };\n      var url = baseUrl + \"InteractPay/services/apexrest/crma_pay/InterACTPayAuthorizationUpdated/?methodType=POST&inputParams=\" + JSON.stringify(payLinkRcdParamsWithId);\n    } else {\n      var payLinkRcdParams = {\n        paymentLinkId: urlPaymentLinkId,\n        Active: false\n      };\n      var url = baseUrl + \"InteractPay/services/apexrest/crma_pay/InterACTPayAuthorizationUpdated/?methodType=POST&inputParams=\" + JSON.stringify(payLinkRcdParams);\n    } // var url =\n    //   baseUrl +\n    //   \"InteractPay/services/apexrest/crma_pay/InterACTPayAuthorizationUpdated/?methodType=POST&inputParams=\" +\n    //   JSON.stringify(payLinkRcdParams);\n\n\n    console.log(\"this.final transaction url --->\" + url);\n    fetch(url, {\n      method: \"GET\",\n      headers: {\n        mode: \"cors\",\n        \"Access-Control-Allow-Origin\": \"*\"\n      }\n    }).then(response => response.json()).then(response => {\n      console.log(\" update  payLink-->\" + JSON.stringify(response)); // var redirectUrl = 'https://medviation-developer-edition.na213.force.com/s/invoice-page'+'?transId=' + this.transId;\n      //   //var redirectUrl = response.charges.data[0].receipt_url;\n      //   this.navigateTo(redirectUrl);\n    }).catch(err => {\n      console.log(\"err\" + err);\n    });\n  };\n\n  const setPayType = payType => {\n    setSelectedPaymentOption(payType);\n  };\n\n  function refreshComponent() {\n    console.log(\"Refesh----------------------------------->\");\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [isLoader ? /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 635,\n      columnNumber: 25\n    }, this) : null, /*#__PURE__*/_jsxDEV(Alert, {\n      alert: alert,\n      setAlert: setAlert\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 636,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"payment-container container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row m-0\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-7 col-12\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12 mb-4\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row box-right card-bg-img\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-md-8 ps-0 \",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"ps-3 textmuted fw-bold h6 mb-0\",\n                    children: \"TOTAL AMOUNT\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 644,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"h1 fw-bold d-flex\",\n                    children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \" fas fa-dollar-sign textmuted pe-1 h6 align-text-top mt-1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 645,\n                      columnNumber: 75\n                    }, this), numberFormat(orderTotal)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 645,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 643,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-md-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"p-org\",\n                    children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"fas fa-circle pe-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 652,\n                      columnNumber: 63\n                    }, this), \"Due amount \"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 652,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"fw-bold mb-3\",\n                    children: numberFormat(dueAmount)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 653,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 651,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 642,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 641,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12 px-0 mb-4\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"box-right card-bg-img\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex pb-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"fw-bold h7\",\n                    children: [\"Order Summary  \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"textmuted\",\n                      children: [\" / (\", orderNumber, \")\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 665,\n                      columnNumber: 60\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 664,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"ms-auto p-blue text-end\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 666,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 663,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row pb-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-6\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"textmuted h8\",\n                      children: \"Patient Name\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 671,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"h7\",\n                      children: patientName ? patientName : /*#__PURE__*/_jsxDEV(Placeholder, {\n                        className: \"w-100 h9\",\n                        animation: \"glow\",\n                        children: /*#__PURE__*/_jsxDEV(Placeholder, {\n                          xs: 7\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 673,\n                          columnNumber: 49\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 672,\n                        columnNumber: 92\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 672,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 670,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-6 text-end\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"textmuted h8\",\n                      children: \"Travel Date\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 678,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"h7\",\n                      children: travelDate ? travelDate : /*#__PURE__*/_jsxDEV(Placeholder, {\n                        className: \"w-100 h9\",\n                        animation: \"glow\",\n                        children: /*#__PURE__*/_jsxDEV(Placeholder, {\n                          xs: 7\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 680,\n                          columnNumber: 49\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 679,\n                        columnNumber: 90\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 679,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 677,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 669,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-6\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"textmuted h8\",\n                      children: \"Orgin\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 686,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"h7\",\n                      children: origin ? origin : /*#__PURE__*/_jsxDEV(Placeholder, {\n                        className: \"w-100 h9\",\n                        animation: \"glow\",\n                        children: /*#__PURE__*/_jsxDEV(Placeholder, {\n                          xs: 7\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 688,\n                          columnNumber: 49\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 687,\n                        columnNumber: 82\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 687,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 685,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-6 text-end\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"textmuted h8\",\n                      children: \"Destination\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 692,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"h7\",\n                      children: [destination ? destination : /*#__PURE__*/_jsxDEV(Placeholder, {\n                        className: \"w-100 h9\",\n                        animation: \"glow\",\n                        children: /*#__PURE__*/_jsxDEV(Placeholder, {\n                          xs: 7\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 694,\n                          columnNumber: 49\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 693,\n                        columnNumber: 92\n                      }, this), \" \"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 693,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 691,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 684,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 662,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 661,\n              columnNumber: 29\n            }, this), showBillingDetails ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12 px-0\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"box-right card-bg-img\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex mb-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"fw-bold\",\n                    children: \"Billing address\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 704,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 703,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mb-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"h7 mb-1\",\n                    children: [billingCity, \" \"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 707,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"h7 mb-1\",\n                    children: [billingLine1, \", \", billingLine2]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 708,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"h7 \",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      children: billingState\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 709,\n                      columnNumber: 64\n                    }, this), \" ,\", /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [\" \", billingCountry, \" \"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 709,\n                      columnNumber: 93\n                    }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [\" \", billingPostalcode]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 709,\n                      columnNumber: 125\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 709,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 706,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 702,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 701,\n              columnNumber: 33\n            }, this) : '']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 640,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 639,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-5 col-12 ps-md-5 p-0 \",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"box-left card-bg-img\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-md-6\",\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"fw-bold h7 mb-1 pt-2\",\n                    children: \"Choose Payment Method\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 721,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 720,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-md-6 float-right text-end\",\n                  children: /*#__PURE__*/_jsxDEV(ButtonGroup, {\n                    children: radios.map((radio, idx) => /*#__PURE__*/_jsxDEV(ToggleButton, {\n                      id: `radio-${idx}`,\n                      type: \"radio\",\n                      variant: idx % 2 ? 'outline-primary' : 'outline-primary',\n                      name: \"radio\",\n                      size: \"sm\",\n                      value: radio.value,\n                      checked: radioValue === radio.value,\n                      onChange: e => {\n                        setShowBillingDetails(false);\n                        setPaymentSelected(false);\n                        setRadioValue(e.currentTarget.value);\n\n                        if (e.currentTarget.value === 'card') {\n                          setShowCard(true);\n                          setShowAch(false);\n                        } else {\n                          setShowAch(true);\n                          setShowCard(false);\n                        }\n                      },\n                      children: radio.name\n                    }, idx, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 726,\n                      columnNumber: 49\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 724,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 723,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 719,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"textmuted h8 mb-0\",\n                children: \"Please choose any payment method to continue\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 750,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"\",\n                children: showAch ? /*#__PURE__*/_jsxDEV(Plaid, {\n                  apicustomerid: apicustomerId,\n                  selectedBankPayment: selectedBankPayment\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 752,\n                  columnNumber: 48\n                }, this) : null\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 751,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"\",\n                children: showCard ? /*#__PURE__*/_jsxDEV(Stripe, {\n                  apicustomerid: apicustomerId,\n                  selectedCardPayment: selectedCardPayment\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 755,\n                  columnNumber: 49\n                }, this) : null\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 754,\n                columnNumber: 33\n              }, this), showCard || showAch ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card card-body bg-light- d-flex flex-row justify-content-between align-items-center mb-3\",\n                children: /*#__PURE__*/_jsxDEV(Placeholder, {\n                  className: \"w-100 h9\",\n                  animation: \"glow\",\n                  children: [/*#__PURE__*/_jsxDEV(Placeholder, {\n                    xs: 7\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 758,\n                    columnNumber: 37\n                  }, this), \" \", /*#__PURE__*/_jsxDEV(Placeholder, {\n                    xs: 4\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 758,\n                    columnNumber: 60\n                  }, this), \" \", /*#__PURE__*/_jsxDEV(Placeholder, {\n                    xs: 4\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 758,\n                    columnNumber: 83\n                  }, this), ' ', /*#__PURE__*/_jsxDEV(Placeholder, {\n                    xs: 6\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 759,\n                    columnNumber: 37\n                  }, this), \" \", /*#__PURE__*/_jsxDEV(Placeholder, {\n                    xs: 8\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 759,\n                    columnNumber: 60\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 757,\n                  columnNumber: 169\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 757,\n                columnNumber: 63\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 718,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-2\",\n              children: /*#__PURE__*/_jsxDEV(\"form\", {\n                className: \"list-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"list-group-item\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"row\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-1 py-2\",\n                      children: /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"radio\",\n                        className: \"me-3\",\n                        id: \"default\",\n                        name: \"Default-Payment\",\n                        value: \"default\",\n                        checked: selectedPaymentOption === 'default',\n                        onChange: e => {\n                          setPayType(e.target.value);\n                        },\n                        disabled: !paymentSelected\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 767,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 766,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-5 py-2\",\n                      children: \"Total amount due\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 770,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-6 py-2 text-end\",\n                      children: numberFormat(dueAmount)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 773,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 765,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 764,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"list-group-item\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"row\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-1 py-2\",\n                      children: /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"radio\",\n                        className: \"me-3\",\n                        id: \"other-payment\",\n                        name: \"other-payment\",\n                        value: \"other-payment\",\n                        checked: selectedPaymentOption === 'other-payment',\n                        onChange: e => {\n                          setPayType(e.target.value);\n                          setPayableAmount('');\n                          setTotalAmount('');\n                          setChargeAmount('');\n                        },\n                        disabled: !paymentSelected\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 781,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 780,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-5 py-2\",\n                      children: \"Other amount\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 784,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-6 text-end\",\n                      children: showOtherAmoutTextField ? /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"input-group\",\n                        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"input-group-text\",\n                          children: \"$\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 790,\n                          columnNumber: 57\n                        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"text\",\n                          className: \"form-control border-end-0 text-end pe-0\",\n                          \"aria-label\": \"Amount (to the nearest dollar)\",\n                          onKeyUp: e => {\n                            setPayableAmount(e.currentTarget.value);\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 791,\n                          columnNumber: 57\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"input-group-text bg-transparent ps-0\",\n                          children: \".00\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 794,\n                          columnNumber: 57\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 789,\n                        columnNumber: 53\n                      }, this) : null\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 787,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 779,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 778,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 763,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 762,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"h8\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row m-0 border-bottom mb-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-8 h8 pe-0 ps-2\",\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"d-block py-2\",\n                      children: \"Payment Charge\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 805,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 804,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-4 p-0 pe-2 text-end\",\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"d-block py-2\",\n                      children: numberFormat(chargeAmount)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 808,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 807,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 803,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex h7 mb-2 px-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"\",\n                    children: \"Total Amount\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 813,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"ms-auto\",\n                    children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"fw-bold\",\n                      children: numberFormat(totalAmount)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 814,\n                      columnNumber: 65\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 814,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 812,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"h8 mb-4\",\n                  children: /*#__PURE__*/_jsxDEV(Form.Check, {\n                    \"aria-label\": \"option 1\",\n                    label: \"I accept Lorem ipsum dolor sit amet elit. Adipisci ea harum sed quaerat tenetur\",\n                    onChange: e => {\n                      setAcceptCondition(e.target.checked);\n                    },\n                    disabled: !paymentSelected\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 817,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 816,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 802,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 801,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-primary d-block h8 w-100\",\n              onClick: makepayment,\n              disabled: !acceptCondition,\n              children: \"PAY NOW\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 822,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 716,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 715,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 638,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 637,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Payment, \"G+miw3zEIfjVOa/9M3OyoGtiNtU=\");\n\n_c = Payment;\nexport default Payment;\n\nvar _c;\n\n$RefreshReg$(_c, \"Payment\");","map":{"version":3,"names":["React","useState","useEffect","Plaid","Stripe","numberFormat","ButtonGroup","ToggleButton","Form","Placeholder","Spinner","Alert","axios","Payment","isLoader","setIsLoader","showAch","setShowAch","showCard","setShowCard","acceptCondition","setAcceptCondition","paymentSelected","setPaymentSelected","showOtherAmoutTextField","setShowOtherAmoutTextField","apicustomerId","setApicustomerId","urlmail","setUrlmail","urlOrderId","setUrlOrderId","urlContactId","setUrlContactId","todaysDate","setTodaysDate","baseUrl","setBaseUrl","alert","setAlert","validLink","setvalidLink","expiredLink","setexpiredLink","cardType","setCardType","totalAmount","setTotalAmount","patientName","setpatientName","origin","setOrigin","destination","setDestination","travelDate","setTravelDate","dueAmount","setDueAmount","payableAmount","setPayableAmount","orderNumber","setOrderNumber","orderTotal","setOrderTotal","paidAmount","setPaidAmount","transactionTotal","setTransactionTotal","orderOpportunity","setOrderOpportunity","orderQuote","setOrderQuote","billingAddress","setBillingAddress","paymentUrl","setPaymentUrl","billingCity","setBillingCity","billingCountry","setBillingCountry","billingState","setBillingState","billingPostalcode","setBillingPostalcode","billingLine1","setBillingLine1","idempotencyKey","setidempotencyKey","billingLine2","setBillingLine2","showBillingDetails","setShowBillingDetails","chargeAmount","setChargeAmount","pageURL","setPageURL","redirectURL","setRedirectURL","transIdUrl","settransIdUrl","charge","setCharge","queryString","window","location","search","urlParams","URLSearchParams","urlPaymentLinkId","get","achRef","createRef","radioValue","setRadioValue","gateway","setGateway","achAuthenticator","setAchAuthenticator","paymentMethodes","setPaymentMethodes","name","value","isStripe","setIsStripe","isPlaid","setIsPlaid","isVeem","setIsVeem","radios","selectedPaymentOption","setSelectedPaymentOption","createRandomKey","getPaymentLinkDetails","console","log","JSON","stringify","chargeAmd","parseFloat","getContactDetails","axiosTest","promise","dataPromise","then","response","data","setChargeAmd","getPaymentMethods","authenticator","array","Card","ACH","WireTransfer","newArray","filter","el","updatedOSArray","map","p","getRedirections","page_url","redirect_url","key","possible","i","charAt","Math","floor","random","length","payLinkParams","paymentLinkId","url","fetch","method","headers","mode","text","slice","apiResponse","parse","amountDue","crma_pay__AmountDue__c","linkActive","crma_pay__Active__c","apiUrl","crma_pay__PaymentURL__c","URL","searchParams","urlCustomerId","urlAmount","createdDate","CreatedDate","date","Date","addedDate","setHours","getHours","current","getFullYear","getMonth","getDate","d1","d2","timeleft","getTime","days","hours","minutes","seconds","valid","inputJson","crma_pay__JSON_Input__c","x","xy","new1","replace","y","PatientName__c","OriginDesired__c","DestinationDesired__c","TravelDate__c","dateValue","substring","AmountDue__c","getOrderDetails","catch","err","contactId","contactParams","contactReponse","Name","email","Email","createCustomer","Authorization","json","newcustomerId","id","updateContParams","customerId","orderId","orderParams","orderReponse","orderNum","orderdetails","OrderNumber","total","TotalAmount","initialOrderAmount","OpportunityId","QuoteId","parseInt","selectedCardPayment","billing_details","card","brand","payementUrl","billingDetails","billingInfo","city","address","country","line1","line2","postal_code","state","selectedBankPayment","makepayment","accept","transactionId","transactionstatus","status","gatewayMessage","charges","outcome","seller_message","gatewayStatus","network_status","currencyCode","currency","localKey","localStorage","getItem","createTransactionRecord","transactionParams","paymentGatewayIdentifier","Amount","transactionEmail","transactionCurrencyCode","transactionOrder","transactionContact","processedDateTime","transactionStatus","gatewayNetworkStatus","transactionQuote","transctionOpportunity","billingStreet","billingZip","setItem","href","message","updatePaymentLinkRecord","payLinkRcdParamsWithId","PaymentTransaction","Active","payLinkRcdParams","setPayType","payType","refreshComponent","radio","idx","e","currentTarget","target","checked"],"sources":["/Users/akshayasreekumar/Documents/Akshaya/InterACTPayReactTs/interactPAY-TS/client/src/components/Pages/Payment.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport './Payment.css';\nimport Plaid from '../Plaid/Plaid';\nimport Stripe from '../Stripe/Stripe';\n//import StripeCard from '../Stripe/StripeCard';\n//import StripeAch from '../Stripe/StripeAch'\nimport { numberFormat } from '../../lib/numberFormat';\nimport { ButtonGroup, ToggleButton, Form, Placeholder } from 'react-bootstrap';\nimport Spinner from '../Spinner/spinner';\nimport Alert from '../Alert/Alert';\nimport { json } from 'stream/consumers';\nimport axios from \"axios\";\n\ninterface BillingData {\n    // billing_details: {\n    address: {\n        city: string,\n        country: string,\n        state: string,\n        line1: string,\n        line2: string,\n        postal_code: string\n    }\n    //}\n}\nconst Payment = () => {\n    const [isLoader, setIsLoader] = React.useState(true);\n    const [showAch, setShowAch] = React.useState(false);\n    const [showCard, setShowCard] = React.useState(false);\n    const [acceptCondition, setAcceptCondition] = React.useState(false);\n    const [paymentSelected, setPaymentSelected] = React.useState(false);\n    const [showOtherAmoutTextField, setShowOtherAmoutTextField] = React.useState(false);\n    const [apicustomerId, setApicustomerId] = useState<string | null>(null);\n    const [urlmail, setUrlmail] = useState<string | null>(null);\n    const [urlOrderId, setUrlOrderId] = useState<string | null>(null);\n    const [urlContactId, setUrlContactId] = useState<string | null>(null);\n    const [todaysDate, setTodaysDate] = useState<string | null>(null);\n    const [baseUrl, setBaseUrl] = useState<string | null>(null);\n    const [alert, setAlert] = useState({});\n    const [validLink, setvalidLink] = React.useState(false);\n    const [expiredLink, setexpiredLink] = React.useState(false);\n    const [cardType, setCardType] = useState<string | null>(null);\n    const [totalAmount, setTotalAmount] = useState<string | null>(null);\n    const [patientName, setpatientName] = useState<string | null>(null);\n    const [origin, setOrigin] = useState<string | null>(null);\n    const [destination, setDestination] = useState<string | null>(null);\n    const [travelDate, setTravelDate] = useState<string | null>(null);\n    const [dueAmount, setDueAmount] = useState<string | null>(null);\n    const [payableAmount, setPayableAmount] = useState<string | null>(null);\n    const [orderNumber, setOrderNumber] = useState<string | null>(null);\n    const [orderTotal, setOrderTotal] = useState<string | null>(null);\n    const [paidAmount, setPaidAmount] = useState<string | null>(null);\n    const [transactionTotal, setTransactionTotal] = useState<string | null>(null);\n    const [orderOpportunity, setOrderOpportunity] = useState<string | null>(null);\n    const [orderQuote, setOrderQuote] = useState<string | null>(null);\n    const [billingAddress, setBillingAddress] = useState({});\n    const [paymentUrl, setPaymentUrl] = useState('');\n    const [billingCity, setBillingCity] = useState<string | null>(null);\n    const [billingCountry, setBillingCountry] = useState<string | null>(null);\n    const [billingState, setBillingState] = useState<string | null>(null);\n    const [billingPostalcode, setBillingPostalcode] = useState<string | null>(null);\n    const [billingLine1, setBillingLine1] = useState<string | null>(null);\n    const [idempotencyKey, setidempotencyKey] = useState('');\n    const [billingLine2, setBillingLine2] = useState<string | null>(null);\n    const [showBillingDetails, setShowBillingDetails] = React.useState(false);\n    const [chargeAmount, setChargeAmount] = useState<string | null>(null);\n    const [pageURL, setPageURL] = useState<string | null>(null);\n    const [redirectURL, setRedirectURL] = useState<string | null>(null);\n    const [transIdUrl, settransIdUrl] = useState('');\n    const [charge, setCharge] = useState('');\n    const queryString = window.location.search;\n    const urlParams = new URLSearchParams(queryString);\n    const urlPaymentLinkId = urlParams.get('Id');\n    const achRef = React.createRef()\n    const [radioValue, setRadioValue] = useState('card');\n\n    const [gateway, setGateway] = useState<string | null>(null);\n    const [achAuthenticator, setAchAuthenticator] = useState<string | null>(null);\n    const [paymentMethodes, setPaymentMethodes] = useState([{ name: '', value: '' }]);\n\n    const [isStripe, setIsStripe] = React.useState(false);\n    const [isPlaid, setIsPlaid] = React.useState(false);\n    const [isVeem, setIsVeem] = React.useState(false);\n\n\n    const radios = [\n        { name: 'Card', value: 'card' },\n        { name: 'ACH', value: 'ach' },\n    ];\n    const [selectedPaymentOption, setSelectedPaymentOption] = useState('default');\n\n    useEffect(() => {\n        \n       // getPaymentMethods()\n        if (!gateway) {\n            if (gateway) {\n                if (gateway === 'Stripe') {\n                    setIsStripe(true);\n                }\n                if (gateway === 'Veem') {\n                    setIsVeem(true)\n                }\n            }\n            if (achAuthenticator) {\n                if (achAuthenticator === 'Plaid') {\n                    setIsPlaid(true)\n                }\n            }\n        }\n       // getRedirections();\n        if (!idempotencyKey) {\n            createRandomKey();\n        }\n        getPaymentLinkDetails();\n        if (apicustomerId && dueAmount && orderTotal) {\n            setIsLoader(false);\n        }\n        if (selectedPaymentOption) {\n            console.log(\"selectedPaymentOption\" + selectedPaymentOption)\n            if (selectedPaymentOption === 'default') {\n                if (dueAmount) {\n                    setShowOtherAmoutTextField(false);\n                    setPayableAmount(JSON.stringify(dueAmount));\n                }\n            }\n            else {\n                setShowOtherAmoutTextField(true);\n            }\n        }\n        setChargeAmount(null);\n        setTotalAmount(null);\n        if (cardType && payableAmount && charge) {\n            let chargeAmd = (parseFloat(charge) / 100) * parseFloat(payableAmount)\n            setChargeAmount(JSON.stringify(chargeAmd))\n            setTotalAmount(JSON.stringify(parseFloat(payableAmount) + chargeAmd));\n        }\n        if (radioValue === 'card' && apicustomerId) {\n            setShowCard(true);\n        }\n        if (!apicustomerId) {\n            console.log(\"No Id\")\n            if (urlContactId && baseUrl) {\n                getContactDetails(urlContactId, baseUrl);\n\n            }\n        }\n        if (transIdUrl) {\n            console.log(\"hi\")\n            // updatePaymentLinkRecord();\n        }\n    }, [apicustomerId, dueAmount, orderTotal, selectedPaymentOption, payableAmount, cardType, radioValue, urlContactId, baseUrl, idempotencyKey, transIdUrl])\n    function axiosTest() {\n        // create a promise for the axios request\n        const promise = axios.get(\"https://crma-pay-developer-edition.na163.force.com/InteractPay/services/apexrest/crma_pay/InteractPayAuthorization/?methodType=GET&inputParams={}\")\n\n        // using .then, create a new promise which extracts the data\n        const dataPromise = promise.then((response) => response.data)\n\n        // return it\n        return dataPromise\n    }\n    function setChargeAmd(charge: string, payableAmount: string) {\n        let chargeAmd = (parseFloat(charge) / 100) * parseFloat(payableAmount)\n        setChargeAmount(JSON.stringify(chargeAmd))\n        setTotalAmount(JSON.stringify(parseFloat(payableAmount) + chargeAmd));\n    }\n\n    async function getPaymentMethods() {\n        const response = await axios.get(\"/api/get_paymentMethods\");\n        console.log(JSON.stringify(response.data))\n        setGateway(response.data.gateway);\n        setAchAuthenticator(response.data.authenticator);\n        let array = [\n            { name: 'Card', value: response.data.Card },\n            { name: 'ACH', value: response.data.ACH },\n            { name: 'WireTransfer', value: response.data.WireTransfer },\n        ];\n        let newArray = array.filter(function (el) {\n            return el.value === true\n        });\n        let updatedOSArray = newArray.map(p =>\n            p.value === true\n              ? { ...p, value: p.name}\n              : p\n          );\n        console.log(\"NewArrayyy\" + JSON.stringify(updatedOSArray))\n        setPaymentMethodes(newArray);\n    }\n    async function getRedirections() {\n        const response = await axios.get(\"/api/get_redirectUrls\");\n        console.log(JSON.stringify(response.data))\n        setRedirectURL(response.data.page_url);\n        setPageURL(response.data.redirect_url);\n    }\n    const createRandomKey = () => {\n        var key = \"\";\n        var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n        for (var i = 0; i < 10; i++) {\n            key += possible.charAt(Math.floor(Math.random() * possible.length));\n        }\n        setidempotencyKey(key);\n        //this.idempotencyKey = key;\n        console.log(\"text--idempotencyKey->\" + idempotencyKey);\n        //localStorage.setItem('RandomKey', this.idempotencyKey);\n    }\n    const getPaymentLinkDetails = () => {\n        let baseUrl = \"https://crma-pay-developer-edition.na163.force.com/\";\n        setBaseUrl(baseUrl);\n        var payLinkParams = { paymentLinkId: urlPaymentLinkId };\n        var url = baseUrl + \"InteractPay/services/apexrest/crma_pay/InterACTPayAuthorizationUpdated/?methodType=GET&inputParams=\" +\n            JSON.stringify(payLinkParams);\n        fetch(url, {\n            method: \"GET\",\n            headers: {\n                mode: \"cors\",\n                \"Access-Control-Allow-Origin\": \"*\",\n            },\n        })\n            .then((response) => response.text())\n            .then((response) => {\n                response = response.slice(1, response.length - 1);\n                var apiResponse = [];\n                apiResponse = JSON.parse(response);\n                console.log(\"----------------------->\" + JSON.stringify(apiResponse))\n                var amountDue = apiResponse.crma_pay__AmountDue__c;\n                var linkActive = apiResponse.crma_pay__Active__c;\n                var apiUrl = apiResponse.crma_pay__PaymentURL__c;\n                let url = new URL(apiUrl);\n                setUrlOrderId(url.searchParams.get(\"orderId\"));\n                setUrlContactId(url.searchParams.get(\"contactId\"));\n                var urlCustomerId = url.searchParams.get(\"customerId\");\n                // var urlCustomerId = '';\n                setApicustomerId(urlCustomerId);\n                let urlAmount = url.searchParams.get(\"amount\");\n                setUrlmail(url.searchParams.get(\"mail\"));\n                let createdDate = apiResponse.CreatedDate;\n                let date = new Date(Date.parse(createdDate));\n                var addedDate = date.setHours(date.getHours() + 8);\n                const current = new Date();\n                setTodaysDate(`${current.getFullYear()}-${current.getMonth() + 1\n                    }-${current.getDate()}`);\n                var d1 = new Date(addedDate);\n                var d2 = new Date(current);\n                var timeleft = d1.getTime() - d2.getTime();\n                var days = Math.floor(timeleft / (1000 * 60 * 60 * 24));\n                var hours = Math.floor((timeleft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n                var minutes = Math.floor((timeleft % (1000 * 60 * 60)) / (1000 * 60));\n                var seconds = Math.floor((timeleft % (1000 * 60)) / 1000);\n                console.log(days + ' Day' + hours + ' Hr' + minutes + ' Min' + seconds + ' Sec');\n                let valid = false;\n                if (days >= 0) {\n                    if (hours > 0) {\n                        setvalidLink(true);\n                    }\n                }\n                // else {\n                //     setexpiredLink(true);\n                //     updatePaymentLinkRecord();\n                // }\n                var inputJson = apiResponse.crma_pay__JSON_Input__c;\n                var x = JSON.stringify(inputJson);\n                var xy = x.slice(1, x.length - 1);\n                var new1 = xy.replace(/!/g, '\"');\n                var y = JSON.parse(new1);\n                if (y[0].PatientName__c) {\n                    setpatientName(y[0].PatientName__c);\n                }\n                if (y[0].OriginDesired__c) {\n                    setOrigin(y[0].OriginDesired__c);\n                }\n                if (y[0].DestinationDesired__c) {\n                    setDestination(y[0].DestinationDesired__c);\n                }\n                if (y[0].TravelDate__c) {\n                    var dateValue = y[0].TravelDate__c;\n                    setTravelDate(dateValue.substring(0, 10));\n                }\n                if (y[0].AmountDue__c) {\n                    setDueAmount(y[0].AmountDue__c);\n                }\n                getOrderDetails(urlOrderId, baseUrl);\n                //getStripeKey();\n            })\n            .catch((err) => {\n                console.log(\"err\" + err);\n            })\n    }\n\n    const getContactDetails = (contactId: string, baseUrl: string) => {\n        var contactParams = { contactId: contactId };\n        var url = baseUrl +\n            \"InteractPay/services/apexrest/crma_pay/InterACTPayAuthorizationUpdated/?methodType=GET&inputParams=\" +\n            JSON.stringify(contactParams);\n        console.log(\"this.contact url ---->\" + url);\n        fetch(url, {\n            method: \"GET\",\n            headers: {\n                mode: \"cors\",\n                \"Access-Control-Allow-Origin\": \"*\",\n            },\n        })\n            .then((response) => response.text())\n            .then((response) => {\n                response = response.slice(1, response.length - 1);\n                var contactReponse = JSON.parse(response);\n                var name = contactReponse.Name;\n                var email = contactReponse.Email;\n                createCustomer(name, email, contactId)\n            })\n            .catch((err) => {\n                console.log(\"err\" + err);\n            })\n    }\n\n    const createCustomer = (name: string, email: string, contactId: string) => {\n        fetch(\n            \"https://api.stripe.com/v1/customers?name=\" + name + \"&email=\" + email,\n            {\n                method: \"POST\",\n                headers: {\n                    \"x-rapidapi-host\": \"https://api.stripe.com\",\n                    Authorization: \" Bearer sk_test_51K9PF1JZdmpiz6ZwomLVnx7eXnu0Buv19EwOe262mK5uj5E4bTpWO1trTF5S1OvVmdnpWtd2fm8s0HHbMlrqY2uZ00lWc3uV7c\",\n                },\n            }\n        )\n            .then((response) => response.json())\n            .then((response) => {\n                var newcustomerId = response.id;\n                console.log(\"customer create -->\" + response.id);\n                if (newcustomerId) {\n                    let updateContParams = { contactId: contactId, customerId: response.id };\n                    var url = baseUrl +\n                        \"InteractPay/services/apexrest/crma_pay/InterACTPayAuthorizationUpdated/?methodType=POST&inputParams=\" +\n                        JSON.stringify(updateContParams);\n                    console.log(\"this.final url --->\" + url);\n                    fetch(url, {\n                        method: \"GET\",\n                        headers: {\n                            mode: \"cors\",\n                            \"Access-Control-Allow-Origin\": \"*\",\n                        },\n                    })\n                        .then((response) => response.json())\n                        .then((response) => {\n                            console.log(\" update  contact-->\" + JSON.stringify(response));\n                            setApicustomerId(newcustomerId)\n                        })\n                        .catch((err) => {\n                            console.log(\"err\" + err);\n                        });\n                }\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    }\n\n    const getOrderDetails = (orderId: string | null, baseUrl: string | null) => {\n        var orderParams = { orderId: orderId };\n        console.log(\"baseUrls--->\" + baseUrl);\n        var url =\n            baseUrl +\n            \"InteractPay/services/apexrest/crma_pay/InterACTPayAuthorizationUpdated/?methodType=GET&inputParams=\" +\n            JSON.stringify(orderParams);\n        console.log(\"this.order url ---->\" + url);\n        fetch(url, {\n            method: \"GET\",\n            headers: {\n                mode: \"cors\",\n                \"Access-Control-Allow-Origin\": \"*\",\n            },\n        })\n            .then((response) => response.text())\n            .then((response) => {\n                response = response.slice(1, response.length - 1);\n                var contactReponse = JSON.parse(response);\n                var orderReponse = JSON.stringify(JSON.parse(response));\n                var orderNum = contactReponse.orderdetails[0].OrderNumber;\n                var total = contactReponse.orderdetails[0].TotalAmount;\n                setOrderNumber(orderNum);\n                setOrderTotal(total);\n                let initialOrderAmount = '' + total + '';\n                setTransactionTotal(initialOrderAmount);\n                if (contactReponse.orderdetails[0].OpportunityId) {\n                    setOrderOpportunity(contactReponse.orderdetails[0].OpportunityId);\n                    setOrderQuote(contactReponse.orderdetails[0].QuoteId);\n                }\n                if (orderTotal && dueAmount) {\n                    setPaidAmount(JSON.stringify(parseInt(orderTotal) - parseInt(dueAmount)));\n                }\n            })\n            .catch((err) => {\n                console.log(\"err\" + err);\n            })\n    }\n\n    const selectedCardPayment = (id: string, billing_details: {\n        address: {\n            city: string,\n            country: string,\n            state: string,\n            line1: string,\n            line2: string,\n            postal_code: string,\n        }\n    }, card: {\n        brand: string,\n        type: string\n    }, charge: string) => {\n        console.log(\"id\" + id);\n        console.log(\"brand\" + card.brand);\n        console.log(\"charge\" + charge);\n        if (id) {\n            setPaymentSelected(true);\n        }\n        if (charge) {\n            if (payableAmount) {\n                setChargeAmd(charge, payableAmount);\n            }\n            setCharge(charge)\n        }\n        if (card) {\n            setCardType(card.brand);\n        }\n        let payementUrl = \"https://api.stripe.com/v1/payment_intents?currency=usd&confirm=true&customer=\" + apicustomerId + \"&payment_method=\" + id\n        setPaymentUrl(payementUrl);\n        const billingDetails = billing_details;\n        const billingInfo: BillingData = billingDetails;\n        setBillingAddress({ city: billingInfo.address.city, country: billingInfo.address.country, line1: billingInfo.address.line1, line2: billingInfo.address.line2, postal_code: billingInfo.address.postal_code, state: billingInfo.address.state })\n        setBillingCity(billingInfo.address.city);\n        setBillingCountry(billingInfo.address.country);\n        setBillingLine1(billingInfo.address.line1);\n        setBillingLine2(billingInfo.address.line2);\n        setBillingPostalcode(billingInfo.address.postal_code);\n        setBillingState(billingInfo.address.state);\n        if (billingInfo.address.city || billingInfo.address.country || billingInfo.address.line1 || billingInfo.address.line2 || billingInfo.address.postal_code || billingInfo.address.state) {\n            setShowBillingDetails(true)\n        }\n        console.log(payementUrl);\n    }\n\n    const selectedBankPayment = (id: string, charge: string) => {\n        if (id) {\n            console.log(\"Bank-Id\" + id + \"------Charge\" + charge);\n            setPaymentSelected(true);\n            let payementUrl = \"https://api.stripe.com/v1/charges?currency=usd&customer=\" + apicustomerId + \"&source=\" + id\n            setPaymentUrl(payementUrl);\n            console.log(payementUrl);\n        }\n        if (charge) {\n            if (payableAmount) {\n                setChargeAmd(charge, payableAmount);\n            }\n            setCharge(charge)\n        }\n    }\n\n    async function makepayment() {\n        setIsLoader(true);\n        fetch(paymentUrl + '&amount=' + totalAmount, {\n            method: \"POST\",\n            headers: {\n                \"x-rapidapi-host\": \"https://api.stripe.com\",\n                \"content-type\": \"application/json\",\n                accept: \"application/json\",\n                Authorization: \" Bearer sk_test_51K9PF1JZdmpiz6ZwomLVnx7eXnu0Buv19EwOe262mK5uj5E4bTpWO1trTF5S1OvVmdnpWtd2fm8s0HHbMlrqY2uZ00lWc3uV7c\",\n                \"Idempotency-Key\": idempotencyKey,\n            },\n        })\n            .then((response) => response.json())\n            .then((response) => {\n                console.log('Key----->' + idempotencyKey);\n                console.log('transactionId----->' + response.id);\n                console.log(JSON.stringify('PaymentReaponse' + response));\n                let transactionId = response.id;\n                if (transactionId) {\n                    getPaymentLinkDetails();\n                }\n                let transactionstatus = response.status;\n                let gatewayMessage = JSON.parse(\n                    JSON.stringify(response.charges.data[0].outcome.seller_message)\n                );\n                let gatewayStatus = JSON.parse(\n                    JSON.stringify(response.charges.data[0].outcome.network_status)\n                );\n                let currencyCode = response.currency;\n                var localKey = localStorage.getItem('RandomKey');\n                setIsLoader(false);\n                if (localKey !== idempotencyKey) {\n                    createTransactionRecord(transactionId, transactionstatus, gatewayMessage, gatewayStatus, currencyCode);\n                }\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    }\n\n    function createTransactionRecord(\n        transactionId: string,\n        transactionstatus: string,\n        gatewayMessage: string,\n        gatewayStatus: string,\n        currencyCode: string\n    ) {\n        setIsLoader(true);\n        // if (this.urlContactId) {\n        //   this.contactId = this.urlContactId;\n        // } else {\n        //   this.contactId = this.newContactId;\n        // }\n        // if (this.urlmail) {\n        //   this.mail = this.urlmail;\n        // } else {\n        //   this.mail = this.email;\n        // }\n        //var amount = '\"'+ this.payingAmount+  '\"';\n        //console.log(\"New amount------>\"+amount);\n        //const amount = this.payingAmount;\n        var transactionParams = {\n            paymentGatewayIdentifier: transactionId,\n            Amount: payableAmount,\n            transactionEmail: urlmail,\n            transactionCurrencyCode: currencyCode,\n            transactionOrder: urlOrderId,\n            transactionContact: urlContactId,\n            processedDateTime: todaysDate,\n            transactionStatus: transactionstatus,\n            gatewayMessage: gatewayMessage,\n            gatewayNetworkStatus: gatewayStatus,\n            transactionQuote: orderQuote,\n            transctionOpportunity: orderOpportunity,\n            billingStreet: billingLine1,\n            billingCity: billingCity,\n            billingCountry: billingCountry,\n            billingState: billingState,\n            billingZip: billingPostalcode\n        };\n\n        var url = baseUrl +\n            \"InteractPay/services/apexrest/crma_pay/InterACTPayAuthorizationUpdated/?methodType=POST&inputParams=\" +\n            JSON.stringify(transactionParams);\n        console.log(\"this.final transaction url --->\" + url);\n        fetch(url, {\n            method: \"GET\",\n            headers: {\n                mode: \"cors\",\n                \"Access-Control-Allow-Origin\": \"*\",\n            },\n        })\n            .then((response) => response.json())\n            .then((response) => {\n                if (response) {\n                    console.log('LstResponse------------------------->' + response);\n                    settransIdUrl(response);\n                    console.log('transid------------------------->' + transIdUrl);\n                    localStorage.setItem('RandomKey', idempotencyKey);\n                    setIsLoader(false);\n                    //setAlert({ status: 'success', message: 'Payment completed successfully' });\n                    if (redirectURL) {\n                        window.location.href = redirectURL;\n                    }\n                    getPaymentLinkDetails();\n                    //this.transIdUrl = response;\n                    //var redirectUrl = 'https://medviation-developer-edition.na213.force.com/s/invoice-page' + '?transId=' + this.transIdUrl;\n                    //console.log(\"invoked redirecturl\" + redirectUrl);\n                    // if(transIdUrl){\n                    // console.log('transid------------------------->' + transIdUrl);\n                    //updatePaymentLinkRecord();\n                    // }\n                }\n                console.log(\" create  transaction-->\" + JSON.stringify(response));\n                //this.navigateTo(redirectUrl);\n            })\n            .catch((err) => {\n                setIsLoader(false);\n                setAlert({ status: 'fail', message: 'Something went wrong' });\n                console.log(\"err\" + err);\n            });\n    }\n\n    const updatePaymentLinkRecord = () => {\n        console.log(\"Invoked Update PayLink\");\n        //var transId = settransIdUrl;\n        if (transIdUrl) {\n            var payLinkRcdParamsWithId = {\n                paymentLinkId: urlPaymentLinkId,\n                PaymentTransaction: transIdUrl,\n                Active: false\n            };\n            var url =\n                baseUrl +\n                \"InteractPay/services/apexrest/crma_pay/InterACTPayAuthorizationUpdated/?methodType=POST&inputParams=\" +\n                JSON.stringify(payLinkRcdParamsWithId);\n        } else {\n            var payLinkRcdParams = {\n                paymentLinkId: urlPaymentLinkId,\n                Active: false\n            };\n            var url =\n                baseUrl +\n                \"InteractPay/services/apexrest/crma_pay/InterACTPayAuthorizationUpdated/?methodType=POST&inputParams=\" +\n                JSON.stringify(payLinkRcdParams);\n        }\n        // var url =\n        //   baseUrl +\n        //   \"InteractPay/services/apexrest/crma_pay/InterACTPayAuthorizationUpdated/?methodType=POST&inputParams=\" +\n        //   JSON.stringify(payLinkRcdParams);\n        console.log(\"this.final transaction url --->\" + url);\n        fetch(url, {\n            method: \"GET\",\n            headers: {\n                mode: \"cors\",\n                \"Access-Control-Allow-Origin\": \"*\",\n            },\n        })\n            .then((response) => response.json())\n            .then((response) => {\n                console.log(\" update  payLink-->\" + JSON.stringify(response));\n                // var redirectUrl = 'https://medviation-developer-edition.na213.force.com/s/invoice-page'+'?transId=' + this.transId;\n                //   //var redirectUrl = response.charges.data[0].receipt_url;\n                //   this.navigateTo(redirectUrl);\n            })\n            .catch((err) => {\n                console.log(\"err\" + err);\n            });\n    }\n    const setPayType = (payType: string) => {\n        setSelectedPaymentOption(payType);\n    }\n    function refreshComponent() {\n        console.log(\"Refesh----------------------------------->\");\n    }\n    return (\n        <>\n            {isLoader ? <Spinner /> : null}\n            <Alert alert={alert} setAlert={setAlert}/>\n            <div className=\"payment-container container\">\n                <div className=\"row m-0\">\n                    <div className=\"col-md-7 col-12\">\n                        <div className=\"row\">\n                            <div className=\"col-12 mb-4\">\n                                <div className=\"row box-right card-bg-img\">\n                                    <div className=\"col-md-8 ps-0 \">\n                                        <p className=\"ps-3 textmuted fw-bold h6 mb-0\">TOTAL AMOUNT</p>\n                                        <p className=\"h1 fw-bold d-flex\"> <span\n                                            className=\" fas fa-dollar-sign textmuted pe-1 h6 align-text-top mt-1\"></span>{numberFormat(orderTotal)}\n                                            {/* <span className=\"textmuted\">.58</span> */}\n                                        </p>\n                                        {/* <p className=\"ms-3 px-2 bg-green\">+10% since last month</p> */}\n                                    </div>\n                                    <div className=\"col-md-4\">\n                                        <p className=\"p-org\"> <span className=\"fas fa-circle pe-2\"></span>Due amount </p>\n                                        <p className=\"fw-bold mb-3\">{numberFormat(dueAmount)}\n                                        </p>\n                                        {/* <p className=\"p-blue\"><span className=\"fas fa-circle pe-2\"></span>Amount Paid</p>\n                                        <p className=\"fw-bold\">{numberFormat(paidAmount)}\n                                        </p> */}\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"col-12 px-0 mb-4\">\n                                <div className=\"box-right card-bg-img\">\n                                    <div className=\"d-flex pb-2\">\n                                        <p className=\"fw-bold h7\">\n                                            Order Summary  <span className=\"textmuted\"> / ({orderNumber})</span></p>\n                                        <p className=\"ms-auto p-blue text-end\">\n                                        </p>\n                                    </div>\n                                    <div className=\"row pb-2\">\n                                        <div className=\"col-6\">\n                                            <p className=\"textmuted h8\">Patient Name</p>\n                                            <p className='h7'>{patientName ? patientName : <Placeholder className=\"w-100 h9\" animation=\"glow\">\n                                                <Placeholder xs={7} />\n                                            </Placeholder>}\n                                            </p>\n                                        </div>\n                                        <div className=\"col-6 text-end\">\n                                            <p className=\"textmuted h8\">Travel Date</p>\n                                            <p className='h7'>{travelDate ? travelDate : <Placeholder className=\"w-100 h9\" animation=\"glow\">\n                                                <Placeholder xs={7} />\n                                            </Placeholder>}</p>\n                                        </div>\n                                    </div>\n                                    <div className=\"row\">\n                                        <div className=\"col-6\">\n                                            <p className=\"textmuted h8\">Orgin</p>\n                                            <p className='h7'>{origin ? origin : <Placeholder className=\"w-100 h9\" animation=\"glow\">\n                                                <Placeholder xs={7} />\n                                            </Placeholder>}</p>\n                                        </div>\n                                        <div className=\"col-6 text-end\">\n                                            <p className=\"textmuted h8\">Destination</p>\n                                            <p className='h7'>{destination ? destination : <Placeholder className=\"w-100 h9\" animation=\"glow\">\n                                                <Placeholder xs={7} />\n                                            </Placeholder>} </p>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            {showBillingDetails ?\n                                <div className=\"col-12 px-0\">\n                                    <div className=\"box-right card-bg-img\">\n                                        <div className=\"d-flex mb-2\">\n                                            <p className=\"fw-bold\">Billing address</p>\n                                        </div>\n                                        <div className=\"mb-2\">\n                                            <p className=\"h7 mb-1\">{billingCity} </p>\n                                            <p className=\"h7 mb-1\">{billingLine1}, {billingLine2}</p>\n                                            <p className=\"h7 \"><span>{billingState}</span> ,<span> {billingCountry} </span> <span> {billingPostalcode}</span></p>\n                                        </div>\n                                    </div>\n                                </div> : ''}\n                        </div>\n                    </div>\n                    <div className=\"col-md-5 col-12 ps-md-5 p-0 \">\n                        <div className=\"box-left card-bg-img\">\n\n                            <div className=\"\">\n                                <div className=\"row\">\n                                    <div className=\"col-md-6\">\n                                        <p className=\"fw-bold h7 mb-1 pt-2\">Choose Payment Method</p>\n                                    </div>\n                                    <div className=\"col-md-6 float-right text-end\">\n                                        <ButtonGroup>\n                                            {radios.map((radio, idx) => (\n                                                <ToggleButton\n                                                    key={idx}\n                                                    id={`radio-${idx}`}\n                                                    type=\"radio\"\n                                                    variant={idx % 2 ? 'outline-primary' : 'outline-primary'}\n                                                    name=\"radio\"\n                                                    size=\"sm\"\n                                                    value={radio.value}\n                                                    checked={radioValue === radio.value}\n                                                    onChange={(e) => {\n                                                        setShowBillingDetails(false);\n                                                        setPaymentSelected(false);\n                                                        setRadioValue(e.currentTarget.value); if (e.currentTarget.value === 'card') {\n                                                            setShowCard(true);\n                                                            setShowAch(false);\n                                                        } else { setShowAch(true); setShowCard(false); }\n                                                    }}\n                                                >\n                                                    {radio.name}\n                                                </ToggleButton>\n                                            ))}\n                                        </ButtonGroup>\n                                    </div>\n                                </div>\n                                <p className=\"textmuted h8 mb-0\">Please choose any payment method to continue</p>\n                                <div className=\"\">\n                                    {showAch ? <Plaid apicustomerid={apicustomerId} selectedBankPayment={selectedBankPayment} /> : null}\n                                </div>\n                                <div className=\"\">\n                                    {showCard ? <Stripe apicustomerid={apicustomerId} selectedCardPayment={selectedCardPayment} /> : null}\n                                </div>\n                                {showCard || showAch ? null : <div className=\"card card-body bg-light- d-flex flex-row justify-content-between align-items-center mb-3\"><Placeholder className=\"w-100 h9\" animation=\"glow\">\n                                    <Placeholder xs={7} /> <Placeholder xs={4} /> <Placeholder xs={4} />{' '}\n                                    <Placeholder xs={6} /> <Placeholder xs={8} />\n                                </Placeholder></div>}\n                            </div>\n                            <div className='mb-2'>\n                                <form className=\"list-group\">\n                                    <label className=\"list-group-item\">\n                                        <div className=\"row\">\n                                            <div className='col-1 py-2'>\n                                                <input type=\"radio\" className=\"me-3\" id=\"default\" name=\"Default-Payment\" value=\"default\" checked={selectedPaymentOption === 'default'} onChange={(e) => {\n                                                    setPayType(e.target.value)\n                                                }} disabled={!paymentSelected} /></div>\n                                            <div className='col-5 py-2'>\n                                                Total amount due\n                                            </div>\n                                            <div className='col-6 py-2 text-end'>\n                                                {numberFormat(dueAmount)}\n                                            </div>\n                                        </div>\n                                    </label>\n                                    <label className=\"list-group-item\">\n                                        <div className=\"row\">\n                                            <div className='col-1 py-2'>\n                                                <input type=\"radio\" className=\"me-3\" id=\"other-payment\" name=\"other-payment\" value=\"other-payment\" checked={selectedPaymentOption === 'other-payment'} onChange={(e) => {\n                                                    setPayType(e.target.value); setPayableAmount(''); setTotalAmount(''); setChargeAmount('');\n                                                }} disabled={!paymentSelected} /></div>\n                                            <div className='col-5 py-2'>\n                                                Other amount\n                                            </div>\n                                            <div className='col-6 text-end'>\n                                                {showOtherAmoutTextField ?\n                                                    <div className=\"input-group\">\n                                                        <span className=\"input-group-text\">$</span>\n                                                        <input type=\"text\" className=\"form-control border-end-0 text-end pe-0\" aria-label=\"Amount (to the nearest dollar)\" onKeyUp={(e) => {\n                                                            setPayableAmount(e.currentTarget.value);\n                                                        }} />\n                                                        <span className=\"input-group-text bg-transparent ps-0\">.00</span>\n                                                    </div> : null}\n                                            </div>\n                                        </div>\n                                    </label>\n                                </form>\n                            </div>\n                            <div>\n                                <div className=\"h8\">\n                                    <div className=\"row m-0 border-bottom mb-3\">\n                                        <div className=\"col-8 h8 pe-0 ps-2\">\n                                            <span className=\"d-block py-2\">Payment Charge</span>\n                                        </div>\n                                        <div className=\"col-4 p-0 pe-2 text-end\">\n                                            <span className=\"d-block py-2\">{numberFormat(chargeAmount)}</span>\n                                        </div>\n                                    </div>\n\n                                    <div className=\"d-flex h7 mb-2 px-2\">\n                                        <p className=\"\">Total Amount</p>\n                                        <p className=\"ms-auto\"> <span className='fw-bold'>{numberFormat(totalAmount)}</span></p>\n                                    </div>\n                                    <div className=\"h8 mb-4\">\n                                        <Form.Check aria-label=\"option 1\" label='I accept Lorem ipsum dolor sit amet elit. Adipisci ea harum sed quaerat tenetur' onChange={(e) => { setAcceptCondition(e.target.checked) }} disabled={!paymentSelected} />\n                                    </div>\n                                </div>\n                            </div>\n\n                            <button className=\"btn btn-primary d-block h8 w-100\" onClick={makepayment} disabled={!acceptCondition}>PAY NOW\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div >\n\n        </>\n    )\n}\nexport default Payment;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}